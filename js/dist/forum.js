module.exports=function(o){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return o[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}return n.m=o,n.c=t,n.d=function(o,t,r){n.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:r})},n.r=function(o){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},n.t=function(o,t){if(1&t&&(o=n(o)),8&t)return o;if(4&t&&"object"==typeof o&&o&&o.__esModule)return o;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:o}),2&t&&"string"!=typeof o)for(var s in o)n.d(r,s,function(t){return o[t]}.bind(null,s));return r},n.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(t,"a",t),t},n.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},n.p="",n(n.s=10)}([function(o,t){o.exports=flarum.core.compat["helpers/icon"]},function(o,t){o.exports=flarum.core.compat.extend},function(o,t){o.exports=flarum.core.compat["components/Notification"]},function(o,t){o.exports=flarum.core.compat["components/NotificationGrid"]},function(o,t){o.exports=flarum.core.compat.Model},function(o,t){o.exports=flarum.core.compat["components/IndexPage"]},function(o,t){o.exports=flarum.core.compat["components/Dropdown"]},function(o,t){o.exports=flarum.core.compat["components/Button"]},function(o,t){o.exports=flarum.core.compat["utils/extractText"]},function(o,t){o.exports=flarum.core.compat.Component},function(o,t,n){"use strict";n.r(t);var r=n(1),s=n(3),i=n.n(s),a=n(4),e=n.n(a),u=n(5),l=n.n(u);function p(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}var c,f=n(6),b=n.n(f),g=n(7),d=n.n(g),w=n(0),_=n.n(w),h=n(8),y=n.n(h),x=n(9),v=function(o){function t(){return o.apply(this,arguments)||this}return p(t,o),t.prototype.view=function(){return m("button",{className:"SubscriptionMenuItem hasIcon",onclick:this.props.onclick},this.props.active?_()("fas fa-check",{className:"Button-icon"}):"",m("span",{className:"SubscriptionMenuItem-label"},_()(this.props.icon,{className:"Button-icon"}),m("strong",null,this.props.label),m("span",{className:"SubscriptionMenuItem-description"},this.props.description)))},t}(n.n(x).a),S=((c={})[!1]="fas fa-star",c.follow="fas fa-star",c.lurk="fas fa-comments",c.ignore="fas fa-eye-slash",c),k=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var n=t.prototype;return n.init=function(){this.loading=m.prop(!1),this.options=[{subscription:!1,icon:S[!1],label:app.translator.trans("fof-follow-tags.forum.sub_controls.not_following_button"),description:app.translator.trans("fof-follow-tags.forum.sub_controls.not_following_text")},{subscription:"follow",icon:S.follow,label:app.translator.trans("fof-follow-tags.forum.sub_controls.following_button"),description:app.translator.trans("fof-follow-tags.forum.sub_controls.following_text")},{subscription:"lurk",icon:S.lurk,label:app.translator.trans("fof-follow-tags.forum.sub_controls.lurking_button"),description:app.translator.trans("fof-follow-tags.forum.sub_controls.lurking_text")},{subscription:"ignore",icon:S.ignore,label:app.translator.trans("fof-follow-tags.forum.sub_controls.ignoring_button"),description:app.translator.trans("fof-follow-tags.forum.sub_controls.ignoring_text")}]},n.view=function(){var o=this,t=this.props.tag,n=t.subscription()||!1,r=app.translator.trans("fof-follow-tags.forum.sub_controls.follow_button"),s=S[n]||"far fa-star",i="SubscriptionMenu-button--"+n;switch(n){case"follow":r=app.translator.trans("fof-follow-tags.forum.sub_controls.following_button");break;case"lurk":r=app.translator.trans("fof-follow-tags.forum.sub_controls.lurking_button");break;case"ignore":r=app.translator.trans("fof-follow-tags.forum.sub_controls.ignoring_button")}var a=app.session.user.preferences(),e=a.notify_newPost_email,u=a.notify_newPost_alert,l=y()(app.translator.trans(e?"fof-follow-tags.forum.sub_controls.notify_email_tooltip":"fof-follow-tags.forum.sub_controls.notify_alert_tooltip")),p={className:"Button SubscriptionMenu-button "+i,icon:s,children:r,onclick:this.saveSubscription.bind(this,t,-1===["follow","lurk","ignore"].indexOf(n)&&"follow"),title:l,loading:this.loading()};return p.config=(e||u)&&!1===n?function(o){$(o).tooltip({container:".SubscriptionMenu",placement:"bottom",delay:250,title:l})}:function(o){return $(o).tooltip("destroy")},m("div",{className:"Dropdown ButtonGroup SubscriptionMenu App-primaryControl"},d.a.component(p),m("button",{className:"Dropdown-toggle Button Button--icon "+i,"data-toggle":"dropdown"},_()("fas fa-caret-down",{className:"Button-icon"})),m("ul",{className:"Dropdown-menu dropdown-menu Dropdown-menu--right"},this.options.map(function(r){return r.onclick=o.saveSubscription.bind(o,t,r.subscription),r.active=n===r.subscription,m("li",null,v.component(r))})))},n.saveSubscription=function(o,t){var n=this;this.loading(!0),app.request({url:app.forum.attribute("apiUrl")+"/tags/"+o.id()+"/subscription",method:"POST",data:{data:{subscription:t}}}).then(function(o){return app.store.pushPayload(o)}).then(function(){n.loading(!1),m.lazyRedraw()}),this.$(".SubscriptionMenu-button").tooltip("hide")},t}(b.a),N=n(2),j=n.n(N),M=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var n=t.prototype;return n.icon=function(){return S.follow},n.href=function(){var o=this.props.notification.subject();return app.route.discussion(o)},n.content=function(){return app.translator.trans("fof-follow-tags.forum.notifications.new_discussion_text",{user:this.props.notification.fromUser(),title:this.props.notification.subject().title()})},t}(j.a),P=function(o){function t(){return o.apply(this,arguments)||this}p(t,o);var n=t.prototype;return n.icon=function(){return S.lurk},n.href=function(){var o=this.props.notification,t=o.subject(),n=o.content()||{};return app.route.discussion(t,n.postNumber)},n.content=function(){return app.translator.trans("fof-follow-tags.forum.notifications.new_post_text",{user:this.props.notification.fromUser()})},t}(j.a);app.initializers.add("fof/follow-tags",function(){app.initializers.has("flarum-tags")?(app.store.models.tags.prototype.subscription=e.a.attribute("subscription"),Object(r.extend)(l.a.prototype,"sidebarItems",function(o){if(this.currentTag()&&app.session.user){var t=this.currentTag();o.replace("newDiscussion",o.get("newDiscussion"),10),o.add("subscription",k.component({tag:t,itemClassName:"App-primaryControl"}),5)}}),app.notificationComponents.newPostInTag=P,app.notificationComponents.newDiscussionInTag=M,Object(r.extend)(i.a.prototype,"notificationTypes",function(o){o.add("newDiscussionInTag",{name:"newDiscussionInTag",icon:"fas fa-user-tag",label:app.translator.trans("fof-follow-tags.forum.settings.notify_new_discussion_label")}),o.add("newPostInTag",{name:"newPostInTag",icon:"fas fa-user-tag",label:app.translator.trans("fof-follow-tags.forum.settings.notify_new_post_label")})})):console.error("!! flarum/tags is not enabled")},-1)}]);
//# sourceMappingURL=forum.js.map